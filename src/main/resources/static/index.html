<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Email Upload</title>
</head>
<body>
<h2>Upload Email CSV</h2>

<form id="uploadForm">
    <label>Email Username:</label><br />
    <input type="text" name="username" required /><br /><br />

    <label>Email Password:</label><br />
    <input type="password" name="password" required /><br /><br />

    <label>Select File (CSV):</label><br />
    <input type="file" name="file" accept=".csv" required /><br /><br />

    <button type="submit">Upload and Send Emails</button>
</form>

<script>
    const form = document.getElementById('uploadForm');

    form.addEventListener('submit', async (e) => {
        e.preventDefault();

        const formData = new FormData();
        const fileInput = form.querySelector('input[name="file"]');
        const username = form.querySelector('input[name="username"]').value;
        const password = form.querySelector('input[name="password"]').value;

        formData.append("file", fileInput.files[0]);
        formData.append("username", username);
        formData.append("password", password);

        try {
            const response = await fetch("http://localhost:8080/uploadfile", {
                method: "POST",
                body: formData
            });

            const result = await response.json();
            console.log("üì¨ Server response:");
            result.forEach(msg => console.log(msg)); // ‚úÖ Logs each message from Spring Boot
            alert("‚úÖ Email process completed. Check F12 console for details.");
        } catch (err) {
            console.error("‚ùå Error uploading:", err);
            alert("‚ùå Upload failed");
        }
    });
</script>
</body>
</html>







<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Email Sender Pro</title>-->
<!--    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">-->
<!--    <style>-->
<!--        * {-->
<!--            margin: 0;-->
<!--            padding: 0;-->
<!--            box-sizing: border-box;-->
<!--        }-->

<!--        body {-->
<!--            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;-->
<!--            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);-->
<!--            min-height: 100vh;-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            justify-content: center;-->
<!--            padding: 20px;-->
<!--        }-->

<!--        .container {-->
<!--            background: rgba(255, 255, 255, 0.95);-->
<!--            backdrop-filter: blur(20px);-->
<!--            border-radius: 24px;-->
<!--            padding: 40px;-->
<!--            width: 100%;-->
<!--            max-width: 500px;-->
<!--            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);-->
<!--            border: 1px solid rgba(255, 255, 255, 0.2);-->
<!--            position: relative;-->
<!--            overflow: hidden;-->
<!--        }-->

<!--        .container::before {-->
<!--            content: '';-->
<!--            position: absolute;-->
<!--            top: 0;-->
<!--            left: 0;-->
<!--            right: 0;-->
<!--            height: 4px;-->
<!--            background: linear-gradient(90deg, #667eea, #764ba2, #f093fb, #f5576c);-->
<!--            background-size: 300% 100%;-->
<!--            animation: gradientShift 3s ease infinite;-->
<!--        }-->

<!--        @keyframes gradientShift {-->
<!--            0%, 100% { background-position: 0% 50%; }-->
<!--            50% { background-position: 100% 50%; }-->
<!--        }-->

<!--        .header {-->
<!--            text-align: center;-->
<!--            margin-bottom: 40px;-->
<!--        }-->

<!--        .logo {-->
<!--            width: 60px;-->
<!--            height: 60px;-->
<!--            background: linear-gradient(135deg, #667eea, #764ba2);-->
<!--            border-radius: 16px;-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            justify-content: center;-->
<!--            margin: 0 auto 20px;-->
<!--            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);-->
<!--        }-->

<!--        .logo i {-->
<!--            color: white;-->
<!--            font-size: 24px;-->
<!--        }-->

<!--        h1 {-->
<!--            color: #2d3748;-->
<!--            font-size: 28px;-->
<!--            font-weight: 700;-->
<!--            margin-bottom: 8px;-->
<!--        }-->

<!--        .subtitle {-->
<!--            color: #718096;-->
<!--            font-size: 16px;-->
<!--            font-weight: 400;-->
<!--        }-->

<!--        .form-group {-->
<!--            margin-bottom: 24px;-->
<!--            position: relative;-->
<!--        }-->

<!--        label {-->
<!--            display: block;-->
<!--            color: #4a5568;-->
<!--            font-size: 14px;-->
<!--            font-weight: 600;-->
<!--            margin-bottom: 8px;-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            gap: 8px;-->
<!--        }-->

<!--        .input-container {-->
<!--            position: relative;-->
<!--        }-->

<!--        input[type="email"],-->
<!--        input[type="password"] {-->
<!--            width: 100%;-->
<!--            padding: 16px 20px;-->
<!--            border: 2px solid #e2e8f0;-->
<!--            border-radius: 12px;-->
<!--            font-size: 16px;-->
<!--            background: #f8fafc;-->
<!--            transition: all 0.3s ease;-->
<!--            outline: none;-->
<!--        }-->

<!--        input[type="email"]:focus,-->
<!--        input[type="password"]:focus {-->
<!--            border-color: #667eea;-->
<!--            background: white;-->
<!--            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);-->
<!--            transform: translateY(-2px);-->
<!--        }-->

<!--        .file-upload {-->
<!--            position: relative;-->
<!--            display: block;-->
<!--            width: 100%;-->
<!--            padding: 20px;-->
<!--            border: 2px dashed #cbd5e0;-->
<!--            border-radius: 12px;-->
<!--            background: #f8fafc;-->
<!--            text-align: center;-->
<!--            cursor: pointer;-->
<!--            transition: all 0.3s ease;-->
<!--        }-->

<!--        .file-upload:hover {-->
<!--            border-color: #667eea;-->
<!--            background: #edf2f7;-->
<!--        }-->

<!--        .file-upload.dragover {-->
<!--            border-color: #667eea;-->
<!--            background: rgba(102, 126, 234, 0.05);-->
<!--            transform: scale(1.02);-->
<!--        }-->

<!--        .file-upload input[type="file"] {-->
<!--            position: absolute;-->
<!--            opacity: 0;-->
<!--            width: 100%;-->
<!--            height: 100%;-->
<!--            cursor: pointer;-->
<!--        }-->

<!--        .file-upload-content {-->
<!--            display: flex;-->
<!--            flex-direction: column;-->
<!--            align-items: center;-->
<!--            gap: 8px;-->
<!--        }-->

<!--        .file-upload i {-->
<!--            font-size: 32px;-->
<!--            color: #a0aec0;-->
<!--        }-->

<!--        .file-upload-text {-->
<!--            color: #4a5568;-->
<!--            font-weight: 500;-->
<!--        }-->

<!--        .file-upload-subtext {-->
<!--            color: #718096;-->
<!--            font-size: 14px;-->
<!--        }-->

<!--        .file-selected {-->
<!--            margin-top: 12px;-->
<!--            padding: 12px;-->
<!--            background: #e6fffa;-->
<!--            border: 1px solid #81e6d9;-->
<!--            border-radius: 8px;-->
<!--            color: #234e52;-->
<!--            display: none;-->
<!--        }-->

<!--        .send-button {-->
<!--            width: 100%;-->
<!--            padding: 16px;-->
<!--            background: linear-gradient(135deg, #667eea, #764ba2);-->
<!--            color: white;-->
<!--            border: none;-->
<!--            border-radius: 12px;-->
<!--            font-size: 16px;-->
<!--            font-weight: 600;-->
<!--            cursor: pointer;-->
<!--            transition: all 0.3s ease;-->
<!--            position: relative;-->
<!--            overflow: hidden;-->
<!--        }-->

<!--        .send-button:hover {-->
<!--            transform: translateY(-2px);-->
<!--            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);-->
<!--        }-->

<!--        .send-button:active {-->
<!--            transform: translateY(0);-->
<!--        }-->

<!--        .send-button:disabled {-->
<!--            opacity: 0.7;-->
<!--            cursor: not-allowed;-->
<!--            transform: none;-->
<!--        }-->

<!--        .button-content {-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            justify-content: center;-->
<!--            gap: 8px;-->
<!--        }-->

<!--        .loading-spinner {-->
<!--            width: 20px;-->
<!--            height: 20px;-->
<!--            border: 2px solid rgba(255, 255, 255, 0.3);-->
<!--            border-top: 2px solid white;-->
<!--            border-radius: 50%;-->
<!--            animation: spin 1s linear infinite;-->
<!--            display: none;-->
<!--        }-->

<!--        @keyframes spin {-->
<!--            0% { transform: rotate(0deg); }-->
<!--            100% { transform: rotate(360deg); }-->
<!--        }-->

<!--        .message {-->
<!--            margin-top: 24px;-->
<!--            padding: 16px;-->
<!--            border-radius: 12px;-->
<!--            font-weight: 500;-->
<!--            text-align: center;-->
<!--            display: none;-->
<!--            animation: slideIn 0.3s ease;-->
<!--        }-->

<!--        @keyframes slideIn {-->
<!--            from {-->
<!--                opacity: 0;-->
<!--                transform: translateY(10px);-->
<!--            }-->
<!--            to {-->
<!--                opacity: 1;-->
<!--                transform: translateY(0);-->
<!--            }-->
<!--        }-->

<!--        .message.success {-->
<!--            background: #f0fff4;-->
<!--            color: #22543d;-->
<!--            border: 1px solid #9ae6b4;-->
<!--        }-->

<!--        .message.error {-->
<!--            background: #fed7d7;-->
<!--            color: #742a2a;-->
<!--            border: 1px solid #feb2b2;-->
<!--        }-->

<!--        .message.info {-->
<!--            background: #ebf8ff;-->
<!--            color: #2a4365;-->
<!--            border: 1px solid #90cdf4;-->
<!--        }-->

<!--        .progress-bar {-->
<!--            width: 100%;-->
<!--            height: 4px;-->
<!--            background: #e2e8f0;-->
<!--            border-radius: 2px;-->
<!--            margin-top: 16px;-->
<!--            overflow: hidden;-->
<!--            display: none;-->
<!--        }-->

<!--        .progress-fill {-->
<!--            height: 100%;-->
<!--            background: linear-gradient(90deg, #667eea, #764ba2);-->
<!--            width: 0%;-->
<!--            transition: width 0.3s ease;-->
<!--            border-radius: 2px;-->
<!--        }-->

<!--        .features {-->
<!--            margin-top: 32px;-->
<!--            padding-top: 24px;-->
<!--            border-top: 1px solid #e2e8f0;-->
<!--        }-->

<!--        .feature-list {-->
<!--            display: grid;-->
<!--            grid-template-columns: 1fr 1fr;-->
<!--            gap: 16px;-->
<!--        }-->

<!--        .feature-item {-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            gap: 8px;-->
<!--            color: #4a5568;-->
<!--            font-size: 14px;-->
<!--        }-->

<!--        .feature-item i {-->
<!--            color: #667eea;-->
<!--            width: 16px;-->
<!--        }-->

<!--        @media (max-width: 480px) {-->
<!--            .container {-->
<!--                padding: 24px;-->
<!--                margin: 10px;-->
<!--            }-->

<!--            h1 {-->
<!--                font-size: 24px;-->
<!--            }-->

<!--            .feature-list {-->
<!--                grid-template-columns: 1fr;-->
<!--            }-->
<!--        }-->

<!--        .tooltip {-->
<!--            position: relative;-->
<!--            display: inline-block;-->
<!--        }-->

<!--        .tooltip .tooltiptext {-->
<!--            visibility: hidden;-->
<!--            width: 200px;-->
<!--            background-color: #2d3748;-->
<!--            color: white;-->
<!--            text-align: center;-->
<!--            border-radius: 6px;-->
<!--            padding: 8px;-->
<!--            position: absolute;-->
<!--            z-index: 1;-->
<!--            bottom: 125%;-->
<!--            left: 50%;-->
<!--            margin-left: -100px;-->
<!--            opacity: 0;-->
<!--            transition: opacity 0.3s;-->
<!--            font-size: 12px;-->
<!--        }-->

<!--        .tooltip:hover .tooltiptext {-->
<!--            visibility: visible;-->
<!--            opacity: 1;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--<div class="container">-->
<!--    <div class="header">-->
<!--        <div class="logo">-->
<!--            <i class="fas fa-paper-plane"></i>-->
<!--        </div>-->
<!--        <h1>Email Sender Pro</h1>-->
<!--        <p class="subtitle">Send bulk emails with ease and precision</p>-->
<!--    </div>-->

<!--    <form id="emailForm">-->
<!--        <div class="form-group">-->
<!--            <label for="username">-->
<!--                <i class="fas fa-envelope"></i>-->
<!--                Gmail Address-->
<!--            </label>-->
<!--            <div class="input-container">-->
<!--                <input type="email" id="username" name="username" required-->
<!--                       placeholder="your-email@gmail.com" autocomplete="email">-->
<!--            </div>-->
<!--        </div>-->

<!--        <div class="form-group">-->
<!--            <label for="password">-->
<!--                <i class="fas fa-key"></i>-->
<!--                App Password-->
<!--                <div class="tooltip">-->
<!--                    <i class="fas fa-question-circle" style="color: #a0aec0; cursor: help;"></i>-->
<!--                    <span class="tooltiptext">Generate an App Password in your Gmail security settings</span>-->
<!--                </div>-->
<!--            </label>-->
<!--            <div class="input-container">-->
<!--                <input type="password" id="password" name="password" required-->
<!--                       placeholder="16-character app password">-->
<!--            </div>-->
<!--        </div>-->

<!--        <div class="form-group">-->
<!--            <label for="file">-->
<!--                <i class="fas fa-file-csv"></i>-->
<!--                Upload CSV File-->
<!--            </label>-->
<!--            <div class="file-upload" id="fileUpload">-->
<!--                <input type="file" id="file" name="file" accept=".csv" required>-->
<!--                <div class="file-upload-content">-->
<!--                    <i class="fas fa-cloud-upload-alt"></i>-->
<!--                    <div class="file-upload-text">Click to upload or drag and drop</div>-->
<!--                    <div class="file-upload-subtext">CSV files only</div>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="file-selected" id="fileSelected">-->
<!--                <i class="fas fa-check-circle"></i>-->
<!--                <span id="fileName"></span>-->
<!--            </div>-->
<!--        </div>-->

<!--        <button type="submit" class="send-button" id="sendButton">-->
<!--            <div class="button-content">-->
<!--                <div class="loading-spinner" id="loadingSpinner"></div>-->
<!--                <i class="fas fa-paper-plane" id="sendIcon"></i>-->
<!--                <span id="buttonText">Send Emails</span>-->
<!--            </div>-->
<!--        </button>-->

<!--        <div class="progress-bar" id="progressBar">-->
<!--            <div class="progress-fill" id="progressFill"></div>-->
<!--        </div>-->
<!--    </form>-->

<!--    <div class="message" id="message"></div>-->

<!--    <div class="features">-->
<!--        <div class="feature-list">-->
<!--            <div class="feature-item">-->
<!--                <i class="fas fa-shield-alt"></i>-->
<!--                <span>Secure & Private</span>-->
<!--            </div>-->
<!--            <div class="feature-item">-->
<!--                <i class="fas fa-bolt"></i>-->
<!--                <span>Lightning Fast</span>-->
<!--            </div>-->
<!--            <div class="feature-item">-->
<!--                <i class="fas fa-chart-line"></i>-->
<!--                <span>Progress Tracking</span>-->
<!--            </div>-->
<!--            <div class="feature-item">-->
<!--                <i class="fas fa-mobile-alt"></i>-->
<!--                <span>Mobile Friendly</span>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--<script>-->
<!--    const form = document.getElementById('emailForm');-->
<!--    const messageBox = document.getElementById('message');-->
<!--    const fileUpload = document.getElementById('fileUpload');-->
<!--    const fileInput = document.getElementById('file');-->
<!--    const fileSelected = document.getElementById('fileSelected');-->
<!--    const fileName = document.getElementById('fileName');-->
<!--    const sendButton = document.getElementById('sendButton');-->
<!--    const loadingSpinner = document.getElementById('loadingSpinner');-->
<!--    const sendIcon = document.getElementById('sendIcon');-->
<!--    const buttonText = document.getElementById('buttonText');-->
<!--    const progressBar = document.getElementById('progressBar');-->
<!--    const progressFill = document.getElementById('progressFill');-->

<!--    // File upload handling-->
<!--    fileInput.addEventListener('change', handleFileSelect);-->
<!--    fileUpload.addEventListener('dragover', handleDragOver);-->
<!--    fileUpload.addEventListener('dragleave', handleDragLeave);-->
<!--    fileUpload.addEventListener('drop', handleDrop);-->

<!--    function handleFileSelect(e) {-->
<!--        const file = e.target.files[0];-->
<!--        if (file) {-->
<!--            displaySelectedFile(file);-->
<!--        }-->
<!--    }-->

<!--    function handleDragOver(e) {-->
<!--        e.preventDefault();-->
<!--        fileUpload.classList.add('dragover');-->
<!--    }-->

<!--    function handleDragLeave(e) {-->
<!--        e.preventDefault();-->
<!--        fileUpload.classList.remove('dragover');-->
<!--    }-->

<!--    function handleDrop(e) {-->
<!--        e.preventDefault();-->
<!--        fileUpload.classList.remove('dragover');-->

<!--        const files = e.dataTransfer.files;-->
<!--        if (files.length > 0) {-->
<!--            const file = files[0];-->
<!--            if (file.type === 'text/csv' || file.name.endsWith('.csv')) {-->
<!--                fileInput.files = files;-->
<!--                displaySelectedFile(file);-->
<!--            } else {-->
<!--                showMessage('Please select a CSV file only.', 'error');-->
<!--            }-->
<!--        }-->
<!--    }-->

<!--    function displaySelectedFile(file) {-->
<!--        fileName.textContent = file.name;-->
<!--        fileSelected.style.display = 'block';-->
<!--        fileUpload.style.border = '2px solid #48bb78';-->
<!--        fileUpload.style.background = '#f0fff4';-->
<!--    }-->

<!--    // Form submission-->
<!--    form.addEventListener('submit', async (e) => {-->
<!--        e.preventDefault();-->

<!--        const username = document.getElementById('username').value;-->
<!--        const password = document.getElementById('password').value;-->

<!--        if (!fileInput.files.length) {-->
<!--            showMessage("Please select a CSV file.", 'error');-->
<!--            return;-->
<!--        }-->

<!--        // Validate email format-->
<!--        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;-->
<!--        if (!emailRegex.test(username)) {-->
<!--            showMessage("Please enter a valid email address.", 'error');-->
<!--            return;-->
<!--        }-->

<!--        // Validate app password format (16 characters)-->
<!--        if (password.length >20) {-->
<!--            showMessage("App password should be not more than 20 characters long.", 'error');-->
<!--            return;-->
<!--        }-->

<!--        setLoadingState(true);-->
<!--        showProgress();-->

<!--        const formData = new FormData();-->
<!--        formData.append('file', fileInput.files[0]);-->
<!--        formData.append('username', username);-->
<!--        formData.append('password', password);-->

<!--        try {-->
<!--            // Simulate progress-->
<!--            let progress = 0;-->
<!--            const progressInterval = setInterval(() => {-->
<!--                progress += Math.random() * 15;-->
<!--                if (progress > 90) progress = 90;-->
<!--                updateProgress(progress);-->
<!--            }, 200);-->

<!--            const response = await fetch('http://localhost:8080/uploadfile', {-->
<!--                method: 'POST',-->
<!--                body: formData-->
<!--            });-->

<!--            clearInterval(progressInterval);-->
<!--            updateProgress(100);-->

<!--            const result = await response.text();-->

<!--            if (response.ok) {-->
<!--                showMessage(`‚úÖ Successfully sent ${result} emails!`, 'success');-->
<!--                form.reset();-->
<!--                resetFileUpload();-->
<!--            } else {-->
<!--                showMessage(`‚ùå Failed: ${result}`, 'error');-->
<!--            }-->
<!--        } catch (error) {-->
<!--            console.error(error);-->
<!--            showMessage(`‚ùå Error: ${error.message}`, 'error');-->
<!--        } finally {-->
<!--            setLoadingState(false);-->
<!--            setTimeout(() => {-->
<!--                hideProgress();-->
<!--            }, 2000);-->
<!--        }-->
<!--    });-->

<!--    function setLoadingState(loading) {-->
<!--        sendButton.disabled = loading;-->

<!--        if (loading) {-->
<!--            loadingSpinner.style.display = 'block';-->
<!--            sendIcon.style.display = 'none';-->
<!--            buttonText.textContent = 'Sending...';-->
<!--        } else {-->
<!--            loadingSpinner.style.display = 'none';-->
<!--            sendIcon.style.display = 'block';-->
<!--            buttonText.textContent = 'Send Emails';-->
<!--        }-->
<!--    }-->

<!--    function showProgress() {-->
<!--        progressBar.style.display = 'block';-->
<!--        updateProgress(0);-->
<!--    }-->

<!--    function hideProgress() {-->
<!--        progressBar.style.display = 'none';-->
<!--        updateProgress(0);-->
<!--    }-->

<!--    function updateProgress(percent) {-->
<!--        progressFill.style.width = percent + '%';-->
<!--    }-->

<!--    function showMessage(text, type) {-->
<!--        messageBox.textContent = text;-->
<!--        messageBox.className = `message ${type}`;-->
<!--        messageBox.style.display = 'block';-->

<!--        // Auto hide after 5 seconds for success messages-->
<!--        if (type === 'success') {-->
<!--            setTimeout(() => {-->
<!--                messageBox.style.display = 'none';-->
<!--            }, 5000);-->
<!--        }-->
<!--    }-->

<!--    function resetFileUpload() {-->
<!--        fileSelected.style.display = 'none';-->
<!--        fileUpload.style.border = '2px dashed #cbd5e0';-->
<!--        fileUpload.style.background = '#f8fafc';-->
<!--    }-->

<!--    // Input animations-->
<!--    const inputs = document.querySelectorAll('input[type="email"], input[type="password"]');-->
<!--    inputs.forEach(input => {-->
<!--        input.addEventListener('focus', function() {-->
<!--            this.parentElement.style.transform = 'scale(1.02)';-->
<!--        });-->

<!--        input.addEventListener('blur', function() {-->
<!--            this.parentElement.style.transform = 'scale(1)';-->
<!--        });-->
<!--    });-->

<!--    // Add some interactive feedback-->
<!--    document.addEventListener('DOMContentLoaded', function() {-->
<!--        // Add subtle animations to feature items-->
<!--        const featureItems = document.querySelectorAll('.feature-item');-->
<!--        featureItems.forEach((item, index) => {-->
<!--            item.style.opacity = '0';-->
<!--            item.style.transform = 'translateY(20px)';-->

<!--            setTimeout(() => {-->
<!--                item.style.transition = 'all 0.5s ease';-->
<!--                item.style.opacity = '1';-->
<!--                item.style.transform = 'translateY(0)';-->
<!--            }, 100 * index);-->
<!--        });-->
<!--    });-->
<!--</script>-->
<!--</body>-->
<!--</html>-->